{% extends "base.html" %}
{% block content %}

<div class="hero">
  <h1>Consulta rápida por área</h1>
  <p class="muted">Pesquise perguntas e respostas e navegue por orientações práticas.</p>
</div>

<section class="card">
  <div class="card-header">
    <div>
      <div class="card-title">Buscar</div>
      <div class="card-sub">Digite palavras-chave e filtre por área.</div>
    </div>
    <span class="pill">Consulta</span>
  </div>

  <form class="form" method="get" action="{{ url_for('index') }}">
    <div class="grid">
      <div class="mini-card">
        <div class="form-row">
          <div class="label">Termos</div>
          <input class="input" name="q" placeholder="Buscar por palavras, tema ou tags" value="{{ q or '' }}">
        </div>
      </div>

      <div class="mini-card">
        <div class="form-row">
          <div class="label">Área</div>
          <select class="input" name="area">
            <option value="">Todas as áreas</option>
            {% for k, label in AREAS %}
              <option value="{{ k }}" {% if area == k %}selected{% endif %}>{{ label }}</option>
            {% endfor %}
          </select>
        </div>
      </div>
    </div>

    <div class="actions">
      <button class="btn btn-action" type="submit">Buscar</button>
      {% if q or area %}
        <a class="btn btn-ghost" href="{{ url_for('index') }}">Limpar filtros</a>
      {% endif %}
    </div>
  </form>
</section>

<section class="card">
  <div class="card-header">
    <div>
      <div class="card-title">Atalhos por área</div>
      <div class="card-sub">Clique para filtrar rapidamente.</div>
    </div>
    <span class="pill">Áreas</span>
  </div>

  <div class="actions">
    <a class="btn btn-ghost" href="{{ url_for('index') }}">Todas</a>
    {% for k, label in AREAS %}
      <a class="btn btn-ghost" href="{{ url_for('index', area=k) }}">{{ label }}</a>
    {% endfor %}
  </div>
</section>

<section class="card">
  <div class="card-header">
    <div>
      <div class="card-title">Resultados</div>
      <div class="card-sub">
        {% if q or area %}
          Mostrando resultados{% if q %} para “{{ q }}”{% endif %}{% if area %} na área {{ area_label(area) }}{% endif %}.
        {% else %}
          Navegue pelos itens disponíveis.
        {% endif %}
      </div>
    </div>
    <span class="pill">{{ qa_items|length }}</span>
  </div>

  <div class="grid">
    {% for it in qa_items %}
      <a class="mini-card" href="{{ url_for('qa_view', qa_id=it['id']) }}" style="text-decoration:none; color: inherit;">
        <div class="mini-top">
          <span class="pill">{{ area_label(it["area"]) }}</span>
          <span class="pill">#{{ it["id"] }}</span>
        </div>

        <div class="mini-title">
          {{ it["pergunta"] }}
        </div>

        <div class="mini-tags muted">
          {{ it["tema"] }}{% if it["tags"] %} · {{ it["tags"] }}{% endif %}
        </div>
      </a>
    {% else %}
      <div class="empty muted">
        Nada encontrado. Tente outros termos ou selecione outra área.
      </div>
    {% endfor %}
  </div>
</section>

{% endblock %}
